<bootstrap id="bootstrap-advanced">
    <!-- 环境变量配置 -->
    <environments imports="env.xml">
        <variable key="PRIVATE_IP" value="${LOCAL_IP}"/>
        <variable key="RPC_URL" value="${PRIVATE_IP}:${RPC_PORT}"/>
        <variable key="RPC_PORT" value="7023"/>
        <variable key="HTTP_PORT" value="8301"/>
        <variable key="HTTP_DASH_STACK" value="http"/>
        <variable key="USER_NAME" value="Leon"/>
    </environments>
    <!-- 需要启动的ServletStack -->
    <stacks>
        <stack id="http" class="org.helium.http.servlet.HttpServletStack">
            <setters>
                <setter field="host">${PRIVATE_IP}</setter>
                <setter field="port">${HTTP_PORT}</setter>
            </setters>
        </stack>
        <!-- 开启对外监听的RPC协议栈 -->
        <stack id="rpc" class="org.helium.framework.rpc.RpcServerStack">
            <setters>
                <setter field="host">${PRIVATE_IP}</setter>
                <setter field="port">${RPC_PORT}</setter>
            </setters>
        </stack>
    </stacks>
    <!-- 特殊化线程池配置executors-->
    <executors>
        <executor type="fixed" name="tasks" size="16" limit="20480"/>
        <executor type="fixed" name="servlet" size="8" limit="4096"/>
    </executors>
    <!-- 需要添加的beans -->
    <beans>
        <bean class="org.helium.sample.bootstrap.advanced.ConfigSampleServlet" stacks="http" executor="servlet"/>
        <bean class="org.helium.sample.bootstrap.advanced.HAConfigSampleServlet" stacks="http" executor="servlet"/>
        <bean class="org.helium.sample.bootstrap.advanced.LegacyRpcSampleServlet" stacks="http"/>
        <bean class="org.helium.sample.bootstrap.advanced.ShardedSampleServiceImpl"/>
        <bean class="org.helium.sample.bootstrap.advanced.ShardedDataSourceServlet" stacks="http"/>
        <bean class="org.helium.sample.bootstrap.advanced.SampleScheduledTask" />
        <bean class="org.helium.sample.bootstrap.advanced.SampleDedicatedTask" executor="tasks" />
    </beans>
    <bundles>
        <bundle path="helium-dashboard~.jar"/>
    </bundles>
</bootstrap>

